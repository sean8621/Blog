<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 content-visibility 优化渲染性能 | Sean86 Blog</title>
    <meta name="description" content="Personal Study Blog">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/Blog/assets/style.Jo49XSGE.css" as="style">
    
    <script type="module" src="/Blog/assets/app.CKKKBr1R.js"></script>
    <link rel="preload" href="/Blog/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Blog/assets/chunks/theme.BG8Esqyt.js">
    <link rel="modulepreload" href="/Blog/assets/chunks/framework.BSW09o0Z.js">
    <link rel="modulepreload" href="/Blog/assets/articles_css-article_content-visibility.md.DOkQm725.lean.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css">
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-00e9a1ae><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6674c1de></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-6674c1de> Skip to content </a><!--]--><!----><header class="VPNav" data-v-00e9a1ae data-v-fcdb95ec><div class="VPNavBar" data-v-fcdb95ec data-v-42544bfd><div class="wrapper" data-v-42544bfd><div class="container" data-v-42544bfd><div class="title" data-v-42544bfd><div class="VPNavBarTitle has-sidebar" data-v-42544bfd data-v-8c4a5202><a class="title" href="/Blog/" data-v-8c4a5202><!--[--><!--]--><!----><span data-v-8c4a5202>Sean86 Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-42544bfd><div class="content-body" data-v-42544bfd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-42544bfd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-42544bfd data-v-da88d83e><span id="main-nav-aria-label" class="visually-hidden" data-v-da88d83e>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Blog/" tabindex="0" data-v-da88d83e data-v-b28dc6d7><!--[--><span data-v-b28dc6d7>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Blog/articles/vue-article/scroll-list-components.html" tabindex="0" data-v-da88d83e data-v-b28dc6d7><!--[--><span data-v-b28dc6d7>笔记</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-42544bfd data-v-e5331f18><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e5331f18 data-v-babdde5c data-v-ab67b120><span class="check" data-v-ab67b120><span class="icon" data-v-ab67b120><!--[--><span class="vpi-sun sun" data-v-babdde5c></span><span class="vpi-moon moon" data-v-babdde5c></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-42544bfd data-v-49801d38 data-v-155bda86><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sean8621" aria-label="github" target="_blank" rel="noopener" data-v-155bda86 data-v-b0655a97><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-42544bfd data-v-a46d6089 data-v-9ded4f2f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9ded4f2f><span class="vpi-more-horizontal icon" data-v-9ded4f2f></span></button><div class="menu" data-v-9ded4f2f><div class="VPMenu" data-v-9ded4f2f data-v-56c62482><!----><!--[--><!--[--><!----><div class="group" data-v-a46d6089><div class="item appearance" data-v-a46d6089><p class="label" data-v-a46d6089>Appearance</p><div class="appearance-action" data-v-a46d6089><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a46d6089 data-v-babdde5c data-v-ab67b120><span class="check" data-v-ab67b120><span class="icon" data-v-ab67b120><!--[--><span class="vpi-sun sun" data-v-babdde5c></span><span class="vpi-moon moon" data-v-babdde5c></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a46d6089><div class="item social-links" data-v-a46d6089><div class="VPSocialLinks social-links-list" data-v-a46d6089 data-v-155bda86><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sean8621" aria-label="github" target="_blank" rel="noopener" data-v-155bda86 data-v-b0655a97><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-42544bfd data-v-5102a63b><span class="container" data-v-5102a63b><span class="top" data-v-5102a63b></span><span class="middle" data-v-5102a63b></span><span class="bottom" data-v-5102a63b></span></span></button></div></div></div></div><div class="divider" data-v-42544bfd><div class="divider-line" data-v-42544bfd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-00e9a1ae data-v-ae46e913><div class="container" data-v-ae46e913><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-ae46e913><span class="vpi-align-left menu-icon" data-v-ae46e913></span><span class="menu-text" data-v-ae46e913>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-ae46e913 data-v-9dba07bf><button data-v-9dba07bf>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-00e9a1ae data-v-f33e0304><div class="curtain" data-v-f33e0304></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f33e0304><span class="visually-hidden" id="sidebar-aria-label" data-v-f33e0304> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>Vue</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/scroll-list-components.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>自动滚动列表</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/echarts.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>echarts组件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/element-tabpan-echarts.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Element-ui Tab 组件切换时 Echarts 解决宽度 100% 问题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/vIf-vFor.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>v-if与v-for</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/vue2-vue3diff.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Vue2/3区别</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/vue-article/vue3-ts-txmap.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Vue3-ts 对接腾讯地图问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>React</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/react-article/react-tips.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>reactTips</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0 has-active" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>CSS</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/css-article/reverse-border-radius.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>反向圆角</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/css-article/bubble-dialog.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>气泡对话框</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/css-article/content-visibility.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>content-visibility 优化渲染性能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/css-article/css-tips.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>CSS Tips</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>JS</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/html2canvas-upload.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>html2canvas线上图片资源上传</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/echarts-use-tips.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Echarts使用小技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/array-traversal.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>数组遍历</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/js-tips.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>JS使用技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/ts-tips.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>TS使用技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/js-article/js-handwriting.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>JS手写题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>Uni-App</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/uniapp-article/dev-Pit.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>uniapp踩坑</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/uniapp-article/breath-animation.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>进度条动画</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/uniapp-article/gloable-share.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>全局开启分享功能</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>Nginx</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/nginx-article/clear-html-cache.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>清除页面缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/nginx-article/404-solve.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>部署成功 刷新页面404</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>其他</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/other-article/esLint.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>搭建项目配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/other-article/funtion-overload.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>函数重载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/other-article/git.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Git 使用技巧</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/other-article/iconfont.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Icon Font使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/other-article/package-json.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>packagejson遇到的问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-f33e0304><section class="VPSidebarItem level-0" data-v-f33e0304 data-v-be9dc528><div class="item" role="button" tabindex="0" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><h2 class="text" data-v-be9dc528>面试真题</h2><!----></div><div class="items" data-v-be9dc528><!--[--><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/js.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>JavaScript面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/css.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>CSS面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/es6.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>ES6面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/vue2.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Vue2面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/vue3.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Vue3面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/react.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>React面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/node.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Node.js面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/miniprogram.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>小程序面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/http.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>HTTP面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/ts.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>TypeScript面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/webpack.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Webpack面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/git.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Git面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/linux.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>Linux面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/algorithm.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>算法面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/design.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>设计模式面试题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-be9dc528 data-v-be9dc528><div class="item" data-v-be9dc528><div class="indicator" data-v-be9dc528></div><a class="VPLink link link" href="/Blog/articles/interview-article/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0.html" data-v-be9dc528><!--[--><p class="text" data-v-be9dc528>深入学习</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-00e9a1ae data-v-744b5992><div class="VPDoc has-sidebar has-aside" data-v-744b5992 data-v-4871e92a><!--[--><!--]--><div class="container" data-v-4871e92a><div class="aside" data-v-4871e92a><div class="aside-curtain" data-v-4871e92a></div><div class="aside-container" data-v-4871e92a><div class="aside-content" data-v-4871e92a><div class="VPDocAside" data-v-4871e92a data-v-d55ecf74><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-d55ecf74 data-v-d07f5793><div class="content" data-v-d07f5793><div class="outline-marker" data-v-d07f5793></div><div class="outline-title" role="heading" aria-level="2" data-v-d07f5793>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d07f5793><span class="visually-hidden" id="doc-outline-aria-label" data-v-d07f5793> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-d07f5793 data-v-cb99207e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-d55ecf74></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4871e92a><div class="content-container" data-v-4871e92a><!--[--><!--]--><main class="main" data-v-4871e92a><div style="position:relative;" class="vp-doc _Blog_articles_css-article_content-visibility" data-v-4871e92a><div><h1 id="使用-content-visibility-优化渲染性能" tabindex="-1">使用 content-visibility 优化渲染性能 <a class="header-anchor" href="#使用-content-visibility-优化渲染性能" aria-label="Permalink to &quot;使用 content-visibility 优化渲染性能&quot;">​</a></h1><h2 id="何为-content-visibility" tabindex="-1">何为 content-visibility? <a class="header-anchor" href="#何为-content-visibility" aria-label="Permalink to &quot;何为 content-visibility?&quot;">​</a></h2><p><code>content-visibility</code>：属性控制一个元素是否渲染其内容，它允许用户代理（浏览器）潜在地省略大量布局和渲染工作，直到需要它为止。</p><blockquote><p>MDN 原文：The content-visibility CSS property controls whether or not an element renders its contents at all, along with forcing a strong set of containments, allowing user agents to potentially omit large swathes of layout and rendering work until it becomes needed. Basically it enables the user agent to skip an element&#39;s rendering work (including layout and painting) until it is needed — which makes the initial page load much faster.</p></blockquote><p>常见属性</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Keyword values */</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: visible;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: hidden;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: auto;</span></span></code></pre></div><p>分别解释一下：</p><ul><li><code>content-visibility: visible</code>：默认值，没有任何效果，相当于没有添加<code>content-visibility</code>，元素的渲染与往常一致。</li><li><code>content-visibility: hidden</code>：与<code>display: none</code>类似，用户代理将跳过其内容的渲染。（这里需要注意的是，跳过的是内容的渲染）</li><li><code>content-visibility: auto</code>：如果该元素不在屏幕上，并且与用户无关，则不会渲染其后代元素。</li></ul><p><strong>contain-intrinsic-size</strong> 当然，除<code>content-visibility</code>之外，还有一个与之配套的属性--<code>contain-intrinsic-size</code>。</p><p><code>contain-intrinsic-size</code>：控制由<code>content-visibility</code>指定的元素的自然大小。</p><p>上面两个属性光看定义和介绍会有点绕。</p><p>我们首先来看看<code>content-visibility</code>如何具体使用。</p><p><code>content-visibility</code>: visible 是默认值，添加后没有任何效果，我们就直接跳过。</p><h2 id="利用-content-visibility-hidden-优化展示切换性能" tabindex="-1">利用 content-visibility: hidden 优化展示切换性能 <a class="header-anchor" href="#利用-content-visibility-hidden-优化展示切换性能" aria-label="Permalink to &quot;利用 content-visibility: hidden 优化展示切换性能&quot;">​</a></h2><p>首先来看看<code>content-visibility: hidden</code>，它通常会拿来和<code>display: none</code>做比较，但是其实它们之间还是有很大的不同的。</p><p>首先，假设我们有两个 DIV 包裹框：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1111&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hidden&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;2222&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>设置两个 div 为 200x200 的黑色块：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.g-wrap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="/Blog/assets/content-visibility-1.B_hfn3Bw.png" alt="效果1" data-fancybox="gallery" loading="lazy"></p><p>接下来，我们给其中的 .hidden 设置 content-visibility: hidden，看看会发生什么：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.hidden</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hidden</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="/Blog/assets/content-visibility-2.9tlKoavJ.png" alt="效果2" data-fancybox="gallery" loading="lazy"></p><p>注意，仔细看效果，这里添加了<code>content-visibility: hidden</code>之后，<strong>消失的只是添加了该元素的 div 的子元素消失不见，而父元素本身及其样式，还是存在页面上的。</strong></p><p>如果我们去掉设置了<code>content-visibility: hidden</code>的元素本身的 width、height、padding、margin 等属性，则元素看上去就如同设置了 display: none 一般，在页面上消失不见了。</p><p>那么，<code>content-visibility: hidden</code>的作用是什么呢？</p><p>设置了<code>content-visibility: hidden</code>的元素，其元素的子元素将被隐藏，但是，它的渲染状态将会被缓存。所以，当<code>content-visibility: hidden</code>被移除时，用户代理无需重头开始渲染它和它的子元素。</p><p>因此，如果我们将这个属性应用在一些一开始需要被隐藏，但是其后在页面的某一时刻需要被渲染，或者是一些需要被频繁切换显示、隐藏状态的元素上，其渲染效率将会有一个非常大的提升。</p><h2 id="利用content-visibility-auto实现虚拟列表" tabindex="-1">利用<code>content-visibility: auto</code>实现虚拟列表 <a class="header-anchor" href="#利用content-visibility-auto实现虚拟列表" aria-label="Permalink to &quot;利用`content-visibility: auto`实现虚拟列表&quot;">​</a></h2><p>接下来是<code>content-visibility</code>的核心用法，利用<code>auto</code>属性值。 <code>content-visibility: auto</code>的作用是，如果该元素不在屏幕上，并且与用户无关，则不会渲染其后代元素。是不是与 LazyLoad 非常类似？ 我们来看这样一个 DEMO，了解其作用： 假设，我们存在这样一个 HTML 结构，含有大量的文本内容：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ... 包含了 N 个 paragraph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>每个<code>.paragraph</code>的内容如下： <img src="/Blog/assets/content-visibility-3.B8MoAbaD.png" alt="Alt" data-fancybox="gallery" loading="lazy"> 因此，整个的页面看起来就是这样的： <img src="/Blog/assets/content-visibility-4.DsZH0G2H.gif" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>由于，我们没有对页面内容进行任何处理，因此，所有的<code>.paragraph</code>在页面刷新的一瞬间，都会进行渲染，看到的效果就如上所示。</p><p>当然，现代浏览器愈加趋于智能，基于这种场景，其实我们非常希望对于仍未看到，仍旧未滚动到的区域，可以延迟加载，只有到我们需要展示、滚动到该处时，页面内容才进行渲染。</p><p>基于这种场景，<code>content-visibility: auto</code>就应运而生了，它允许浏览器对于设置了该属性的元素进行判断，如果该元素当前不处于视口内，则不渲染该元素。</p><p>我们基于上述的代码，只需要最小化，添加这样一段代码：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.paragraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>再看看效果，仔细观察右侧的滚动条： <img src="/Blog/assets/content-visibility-5.DpAWlBqq.png" alt="Alt" data-fancybox="gallery" loading="lazy"></p><blockquote><p>这里我使用了<code>::-webkit-scrollbar</code>相关样式，让滚动条更明显。</p></blockquote><p>可能你还没意识到发生了什么，我们对比下添加了<code>content-visibility: auto</code>和没有添加<code>content-visibility: auto</code>的两种效果下文本的整体高度： <img src="/Blog/assets/content-visibility-6.CZfS9rNp.png" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>有着非常明显的差异，这是因为，设置了<code>content-visibility: auto</code>的元素，在非可视区域内，目前并没有被渲染，因此，右侧内容的高度其实是比正常状态下少了一大截的。</p><p>好，我们实际开始进行滚动，看看会发生什么： <img src="/Blog/assets/content-visibility-7.DRPTO9zz.gif" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>由于下方的元素在滚动的过程中，出现在视口范围内才被渲染，因此，滚动条出现了明显的飘忽不定的抖动现象。（当然这也是使用了<code>content-visibility: auto</code>的一个小问题之一），不过明显可以看出，这与我们通常使用 JavaScript 实现的虚拟列表非常类似。</p><p>当然，在向下滚动的过程中，上方消失的已经被渲染过且消失在视口的元素，也会因为消失在视口中，重新被隐藏。因此，即便页面滚动到最下方，整体的滚动条高度还是没有什么变化的。</p><h2 id="content-visibility-是否能够优化渲染性能" tabindex="-1">content-visibility 是否能够优化渲染性能？ <a class="header-anchor" href="#content-visibility-是否能够优化渲染性能" aria-label="Permalink to &quot;content-visibility 是否能够优化渲染性能？&quot;">​</a></h2><p>那么，<code>content-visibility</code>是否能够优化渲染性能呢？</p><p>在 <a href="https://www.youtube.com/watch?v=FFA-v-CIxJQ&amp;t=869s" target="_blank" rel="noreferrer">Youtube -- Slashing layout cost with content-visibility</a> 中，给了一个非常好的例子。</p><p>这里我简单复现一下。</p><p>对于一个存在巨量 HTML 内容的页面，譬如类似于这个页面 -- <a href="https://html.spec.whatwg.org/" target="_blank" rel="noreferrer">HTML - Living Standard</a></p><p><img src="/Blog/assets/content-visibility-8.DZTQVQko.gif" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>可以感受到，往下翻，根本翻不到尽头。（这里我在本地模拟了该页面，复制了该页面的所有 DOM，并非实际在该网站进行测试）</p><p>如果不对这个页面做任何处理，看看首次渲染需要花费的时间： <img src="/Blog/assets/content-visibility-9.BzUqFGAI.png" alt="Alt" data-fancybox="gallery" loading="lazy"> 可以看到，DOMContentLoaded 的时间的 <code>3s+</code>，而花费在 Rendering 上的就有整整 <code>2900ms</code>！</p><p>而如果给这个页面的每个段落，添加上<code>content-visibility: auto</code>，再看看整体的耗时： <img src="/Blog/assets/content-visibility-10.TiDZ59Qo.png" alt="Alt" data-fancybox="gallery" loading="lazy"> 可以看到，DOMContentLoaded 的时间骤降至了 <code>500ms+</code>，而花费在 Rendering 上的，直接优化到了 <code>61ms</code>！</p><p><code>2900ms --&gt; 61ms</code>，可谓是惊人级别的优化了。因此，<code>content-visibility: auto</code> 对于长文本、长列表功能的优化是显而易见的。</p><h2 id="利用contain-intrinsic-size解决滚动条抖动问题" tabindex="-1">利用<code>contain-intrinsic-size</code>解决滚动条抖动问题 <a class="header-anchor" href="#利用contain-intrinsic-size解决滚动条抖动问题" aria-label="Permalink to &quot;利用`contain-intrinsic-size`解决滚动条抖动问题&quot;">​</a></h2><p>当然，<code>content-visibility</code>也存在一些小问题。</p><p>从上面的例子，也能看到，在利用<code>content-visibility: auto</code>处理长文本、长列表的时候。在滚动页面的过程中，滚动条一直在抖动，这不是一个很好的体验。</p><p>当然，这也是许多虚拟列表都会存在的一些问题。</p><p>好在，规范制定者也发现了这个问题。这里我们可以使用另外一个 CSS 属性，也就是文章一开头提到的另外一个属性 -- <code>contain-intrinsic-size</code>，来解决这个问题。</p><p><code>contain-intrinsic-size</code>：控制由<code>content-visibility</code>指定的元素的自然大小。</p><p>什么意思呢？</p><p>还是上面的例子</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ... 包含了 N 个 paragraph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>如果我们不使用<code>contain-intrinsic-size</code>，只对视口之外的元素使用<code>content-visibility: auto</code>，那么视口外的元素高度通常就为 0。</p><blockquote><p>当然，如果直接给父元素设置固定的 height，也是会有高度的。</p></blockquote><p>那么实际的滚动效果，滚动条就是抖动的： <img src="/Blog/assets/content-visibility-7.DRPTO9zz.gif" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>所以，我们可以同时利用上<code>contain-intrinsic-size</code>，如果能准确知道设置了<code>content-visibility: auto</code>的元素在渲染状态下的高度，就填写对应的高度。如果如法准确知道高度，也可以填写一个大概的值：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.paragraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  contain-intrinsic-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">320</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>如此之后，浏览器会给未被实际渲染的视口之外的<code>.paragraph</code>元素一个高度，避免出现滚动条抖动的现象： <img src="/Blog/assets/content-visibility-12.BDv3p25W.gif" alt="Alt" data-fancybox="gallery" loading="lazy"> 你可以自己亲自尝试感受一下：<a href="https://codepen.io/Chokcoco/pen/rNJvPEX" target="_blank" rel="noreferrer">CodePen Demo -- content-visibility: auto Demo</a></p><h2 id="content-visibility-auto-vs-lazyload" tabindex="-1"><code>content-visibility: auto</code> VS <code>LazyLoad</code> <a class="header-anchor" href="#content-visibility-auto-vs-lazyload" aria-label="Permalink to &quot;`content-visibility: auto` VS `LazyLoad`&quot;">​</a></h2><p>那么，<code>content-visibility: auto</code> <strong>是否可以替代</strong> LazyLoad（懒加载）呢？</p><p>我们来看看我们通常对于 LazyLoad（懒加载）的一个定义。</p><p><strong>LazyLoad</strong>：通常而言，LazyLoad 的作用在于，当页面未滚动到相应区域，该区域内的资源（网络请求）不会被加载。反之，当页面滚动到相应区域，相关资源的请求才会被发起。</p><p>那么，如果 <code>content-visibility: auto</code> 要能够替代 LazyLoad，则需要做到，初始化渲染的时候，在页面当前展示范围外的，设定了 <code>content-visibility: auto</code> 的元素内的一些静态资源不会被加载。</p><p>这里我尝试做了一个简单的 DEMO：</p><p>还是借助上述的代码，假设我们有如下的 HTML 结构，也就是在上述代码基础上，插入一些图片资源：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ... 包含了 N 个 paragraph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.womenly.net/wp-content/uploads/2017/03/Tips-to-Maintain-the-Soft-Skin.jpg&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD8kEsEE3hJ64aU-_TKQJtvKDtTOGQfT3A4A&amp;usqp=CAU&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://i.pinimg.com/originals/e8/ba/25/e8ba252917952f23dfc9715e942e654e.jpg&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>相应设置下 CSS：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.paragraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.g-img</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>当刷新页面的时候，观察网络请求（Network）的状况： <img src="/Blog/assets/content-visibility-13.Cps7euF5.png" alt="Alt" data-fancybox="gallery" loading="lazy"></p><p>即便当前页面可视区域外的内容未被渲染，但是图片依然会被加载！</p><p>因此，这也得到了一个非常重要的结论：</p><p><code>content-visibility: auto</code> 无法直接替代 LazyLoad，设置了 <code>content-visibility: auto</code> 的元素在可视区外只是未被渲染，但是其中的静态资源仍旧会在页面初始化的时候被全部加载。</p><p>所以，在实际使用中，如果你的业务中已经使用了比较完善的 Lazyload 处理长列表或者一些图片资源，那么 <code>content-visibility: auto</code> 不是更好的选择。</p><h2 id="可访问性功能探究" tabindex="-1">可访问性功能探究 <a class="header-anchor" href="#可访问性功能探究" aria-label="Permalink to &quot;可访问性功能探究&quot;">​</a></h2><p>当然，<code>content-visibility: auto</code> 的特性又引申出了另外一个有意思的点。</p><p>如果说可视区外的内容未被渲染，那是否会影响用户进行全文检索呢？毕竟这是一个非常重要的功能。</p><p>我们再来做个探究，还是上面的 DEMO，我们在首尾添加两个特殊的字符串：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g-wrap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;content-visibility: auto 对搜索功能影响的探究&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ... 包含了 N 个 paragraph</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paragraph&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;content-visibility: auto 对搜索功能影响的探究&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>相应设置下 CSS：</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.paragraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  content-visibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>好，如此一来，在页面刷新后，第二个<code>.text</code>是处于未被渲染状态，我们试着全局<code>ctrl + F</code>查找一下，看看能找到几个： <img src="/Blog/assets/content-visibility-14.BVpZaEMw.png" alt="Alt" data-fancybox="gallery" loading="lazy"> 很有意思的现象，全局查找的时候，可以找到当前未被渲染的元素内的内容。</p><p>这里，我们可以得到另外一个非常重要的点：</p><p><strong>即便存在设置了</strong><code>content-visibility: auto</code><strong>的未被渲染的元素，但是它并不会影响全局的搜索功能。</strong></p><p>这也是<code>content-visibility</code>设计上充分的考虑，对<strong>可访问性</strong>功能，或者说用户体验的考量，有了这一点，对于它的实际使用有着非常大的帮助。</p><h2 id="content-visibility-的一些其他问题" tabindex="-1">content-visibility 的一些其他问题 <a class="header-anchor" href="#content-visibility-的一些其他问题" aria-label="Permalink to &quot;content-visibility 的一些其他问题&quot;">​</a></h2><p>首先，看看 content-visibility 的兼容性（2024-08-14）： <img src="/Blog/assets/content-visibility-15.C-UrM4a4.png" alt="Alt" data-fancybox="gallery" loading="lazy"> 同时，也有一些同学表示，利用<code>content-visibility: auto</code>只能解决部分场景，在海量 DOM 的场景下的实际效果，还有待进一步的实测。真正运用的时候，多做对比，在做取舍。</p><p>当然，现代浏览器已经越来越智能，类似<code>content-visibility</code>功能的属性也越来越多，我们在性能优化的路上有了更多选择，总归是一件好事。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><ol><li>在一些需要被频繁切换显示、隐藏状态的元素上，使用 content-visibility: hidden，用户代理无需重头开始渲染它和它的子元素，能有效的提升切换时的渲染性能；</li><li>content-visibility: auto 的作用更加类似于虚拟列表，使用它能极大的提升长列表、长文本页面的渲染性能；</li><li>合理使用 contain-intrinsic-size 预估设置了 content-visibility: auto 元素的高宽，可以有效的避免滚动条在滚动过程中的抖动；</li><li>content-visibility: auto 无法直接替代 LazyLoad，设置了 content-visibility: auto 的元素在可视区外只是未被渲染，但是其中的静态资源仍旧会在页面初始化的时候被全部加载；</li><li>即便存在设置了 content-visibility: auto 的未被渲染的元素，但是它并不会影响全局的搜索功能。</li></ol><p><a href="https://github.com/chokcoco/iCSS/issues/185" target="_blank" rel="noreferrer">原文地址</a></p></div></div></main><footer class="VPDocFooter" data-v-4871e92a data-v-6ab11dd1><!--[--><!--]--><!----><nav class="prev-next" data-v-6ab11dd1><div class="pager" data-v-6ab11dd1><a class="VPLink link pager-link prev" href="/Blog/articles/css-article/bubble-dialog.html" data-v-6ab11dd1><!--[--><span class="desc" data-v-6ab11dd1>Previous page</span><span class="title" data-v-6ab11dd1>气泡对话框</span><!--]--></a></div><div class="pager" data-v-6ab11dd1><a class="VPLink link pager-link next" href="/Blog/articles/css-article/css-tips.html" data-v-6ab11dd1><!--[--><span class="desc" data-v-6ab11dd1>Next page</span><span class="title" data-v-6ab11dd1>CSS Tips</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"Bfj7YsB_\",\"articles_css-article_bubble-dialog.md\":\"1cWO690K\",\"articles_css-article_content-visibility.md\":\"DOkQm725\",\"articles_css-article_css-tips.md\":\"IdiuA_Iz\",\"articles_css-article_reverse-border-radius.md\":\"i7GYbB0f\",\"articles_interview-article_algorithm.md\":\"CQXMZgyl\",\"articles_interview-article_css.md\":\"WmnV1W7_\",\"articles_interview-article_design.md\":\"BtPO243r\",\"articles_interview-article_es6.md\":\"BBtVz91T\",\"articles_interview-article_git.md\":\"B1-b76hv\",\"articles_interview-article_http.md\":\"DIXX7VEz\",\"articles_interview-article_js.md\":\"kW9izvk7\",\"articles_interview-article_linux.md\":\"B8gTUJT6\",\"articles_interview-article_miniprogram.md\":\"C_yldj4s\",\"articles_interview-article_node.md\":\"CCYtCOwG\",\"articles_interview-article_react.md\":\"BqOhjE_s\",\"articles_interview-article_ts.md\":\"Di-WmY_j\",\"articles_interview-article_vue2.md\":\"BLpgVeq6\",\"articles_interview-article_vue3.md\":\"PFj54DdJ\",\"articles_interview-article_webpack.md\":\"CuAuxSuP\",\"articles_interview-article_深入学习.md\":\"CbqciF8G\",\"articles_js-article_array-traversal.md\":\"CDDdmbIW\",\"articles_js-article_echarts-use-tips.md\":\"C43KqSPT\",\"articles_js-article_html2canvas-upload.md\":\"BLUTP9po\",\"articles_js-article_js-handwriting.md\":\"DmD4hYZe\",\"articles_js-article_js-tips.md\":\"DQsXyYYU\",\"articles_js-article_ts-tips.md\":\"BPWeZvoA\",\"articles_nginx-article_404-solve.md\":\"Iz4QBmzh\",\"articles_nginx-article_clear-html-cache.md\":\"D3ZWoE_Y\",\"articles_other-article_eslint.md\":\"DO-PkaHZ\",\"articles_other-article_funtion-overload.md\":\"DDgCZzyk\",\"articles_other-article_git.md\":\"BIQyzD94\",\"articles_other-article_iconfont.md\":\"DcMhMkBA\",\"articles_other-article_package-json.md\":\"DFpTrgq_\",\"articles_react-article_react-tips.md\":\"Cye2Y1F1\",\"articles_uniapp-article_breath-animation.md\":\"Bld9FdXS\",\"articles_uniapp-article_dev-pit.md\":\"DaWpMOBr\",\"articles_uniapp-article_gloable-share.md\":\"BE7GCqKN\",\"articles_vue-article_echarts.md\":\"DDeJOWk7\",\"articles_vue-article_element-tabpan-echarts.md\":\"BHXXQa8k\",\"articles_vue-article_scroll-list-components.md\":\"CPQjw2uO\",\"articles_vue-article_vif-vfor.md\":\"GQtVb64u\",\"articles_vue-article_vue2-vue3diff.md\":\"DydCaCoz\",\"articles_vue-article_vue3-ts-txmap.md\":\"BvXj5RLh\",\"articles_vue-article_vuex-pinia.md\":\"Cw42KLHN\",\"index.md\":\"Bb5TRxCT\",\"markdown-examples.md\":\"C8Iew91E\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Sean86 Blog\",\"description\":\"Personal Study Blog\",\"base\":\"/Blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"笔记\",\"link\":\"/articles/vue-article/scroll-list-components\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/articles/\":[{\"text\":\"Vue\",\"items\":[{\"text\":\"自动滚动列表\",\"link\":\"/articles/vue-article/scroll-list-components\"},{\"text\":\"echarts组件\",\"link\":\"/articles/vue-article/echarts\"},{\"text\":\"Element-ui Tab 组件切换时 Echarts 解决宽度 100% 问题\",\"link\":\"/articles/vue-article/element-tabpan-echarts\"},{\"text\":\"v-if与v-for\",\"link\":\"/articles/vue-article/vIf-vFor\"},{\"text\":\"Vue2/3区别\",\"link\":\"/articles/vue-article/vue2-vue3diff\"},{\"text\":\"Vue3-ts 对接腾讯地图问题\",\"link\":\"/articles/vue-article/vue3-ts-txmap\"}]},{\"text\":\"React\",\"items\":[{\"text\":\"reactTips\",\"link\":\"/articles/react-article/react-tips\"}]},{\"text\":\"CSS\",\"items\":[{\"text\":\"反向圆角\",\"link\":\"/articles/css-article/reverse-border-radius\"},{\"text\":\"气泡对话框\",\"link\":\"/articles/css-article/bubble-dialog\"},{\"text\":\"content-visibility 优化渲染性能\",\"link\":\"/articles/css-article/content-visibility\"},{\"text\":\"CSS Tips\",\"link\":\"/articles/css-article/css-tips\"}]},{\"text\":\"JS\",\"items\":[{\"text\":\"html2canvas线上图片资源上传\",\"link\":\"/articles/js-article/html2canvas-upload\"},{\"text\":\"Echarts使用小技巧\",\"link\":\"/articles/js-article/echarts-use-tips\"},{\"text\":\"数组遍历\",\"link\":\"/articles/js-article/array-traversal\"},{\"text\":\"JS使用技巧\",\"link\":\"/articles/js-article/js-tips\"},{\"text\":\"TS使用技巧\",\"link\":\"/articles/js-article/ts-tips\"},{\"text\":\"JS手写题\",\"link\":\"/articles/js-article/js-handwriting\"}]},{\"text\":\"Uni-App\",\"items\":[{\"text\":\"uniapp踩坑\",\"link\":\"/articles/uniapp-article/dev-Pit\"},{\"text\":\"进度条动画\",\"link\":\"/articles/uniapp-article/breath-animation\"},{\"text\":\"全局开启分享功能\",\"link\":\"/articles/uniapp-article/gloable-share\"}]},{\"text\":\"Nginx\",\"items\":[{\"text\":\"清除页面缓存\",\"link\":\"/articles/nginx-article/clear-html-cache\"},{\"text\":\"部署成功 刷新页面404\",\"link\":\"/articles/nginx-article/404-solve\"}]},{\"text\":\"其他\",\"items\":[{\"text\":\"搭建项目配置\",\"link\":\"/articles/other-article/esLint\"},{\"text\":\"函数重载\",\"link\":\"/articles/other-article/funtion-overload\"},{\"text\":\"Git 使用技巧\",\"link\":\"/articles/other-article/git\"},{\"text\":\"Icon Font使用\",\"link\":\"/articles/other-article/iconfont\"},{\"text\":\"packagejson遇到的问题\",\"link\":\"/articles/other-article/package-json\"}]},{\"text\":\"面试真题\",\"items\":[{\"text\":\"JavaScript面试题\",\"link\":\"/articles/interview-article/js\"},{\"text\":\"CSS面试题\",\"link\":\"/articles/interview-article/css\"},{\"text\":\"ES6面试题\",\"link\":\"/articles/interview-article/es6\"},{\"text\":\"Vue2面试题\",\"link\":\"/articles/interview-article/vue2\"},{\"text\":\"Vue3面试题\",\"link\":\"/articles/interview-article/vue3\"},{\"text\":\"React面试题\",\"link\":\"/articles/interview-article/react\"},{\"text\":\"Node.js面试题\",\"link\":\"/articles/interview-article/node\"},{\"text\":\"小程序面试题\",\"link\":\"/articles/interview-article/miniprogram\"},{\"text\":\"HTTP面试题\",\"link\":\"/articles/interview-article/http\"},{\"text\":\"TypeScript面试题\",\"link\":\"/articles/interview-article/ts\"},{\"text\":\"Webpack面试题\",\"link\":\"/articles/interview-article/webpack\"},{\"text\":\"Git面试题\",\"link\":\"/articles/interview-article/git\"},{\"text\":\"Linux面试题\",\"link\":\"/articles/interview-article/linux\"},{\"text\":\"算法面试题\",\"link\":\"/articles/interview-article/algorithm\"},{\"text\":\"设计模式面试题\",\"link\":\"/articles/interview-article/design\"},{\"text\":\"深入学习\",\"link\":\"/articles/interview-article/深入学习\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/sean8621\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>